<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: FriendlyId::Base
  
    &mdash; Documentation by YARD 0.7.2
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../FriendlyId.html" title="FriendlyId (module)">FriendlyId</a></span></span>
     &raquo; 
    <span class="title">Base</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: FriendlyId::Base
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/friendly_id/base.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Class methods that will be added to model classes that extend <span class='object_link'><a href="../FriendlyId.html" title="FriendlyId (module)">FriendlyId</a></span>.
</p>


  </div>
</div>
<div class="tags">
  
</div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#friendly_id-instance_method" title="#friendly_id (instance method)">- (Object) <strong>friendly_id</strong>(base = nil, options = {}) {|config| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Configure FriendlyId&#8217;s behavior in a model.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#friendly_id_config-instance_method" title="#friendly_id_config (instance method)">- (Object) <strong>friendly_id_config</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the model class&#8217;s <span class='object_link'><a href="Configuration.html" title="FriendlyId::Configuration (class)">friendly_id_config</a></span>.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="friendly_id-instance_method">
  
    - (<tt>Object</tt>) <strong>friendly_id</strong>(base = nil, options = {}) {|config| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Configure FriendlyId&#8217;s behavior in a model.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id extend'>extend</span> <span class='const'>FriendlyId</span>
    <span class='id friendly_id'>friendly_id</span> <span class='symbol'>:title</span><span class='comma'>,</span> <span class='symbol'>:use</span> <span class='op'>=&gt;</span> <span class='symbol'>:slugged</span>
  <span class='kw'>end</span>
</pre>
<p>
When given the optional block, this method will yield the class&#8217;s
instance of <span class='object_link'><a href="Configuration.html" title="FriendlyId::Configuration (class)">Configuration</a></span> to the block before evaluating
other arguments, so configuration values set in the block may be
overwritten by the arguments. This order was chosen to allow passing the
same proc to multiple models, while being able to override the values it
sets. Here is a contrived example:
</p>
<pre class="code">
  <span class='gvar'>$friendly_id_config_proc</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id config'>config</span><span class='op'>|</span>
    <span class='id config'>config</span><span class='period'>.</span><span class='id base'>base</span> <span class='op'>=</span> <span class='symbol'>:name</span>
    <span class='id config'>config</span><span class='period'>.</span><span class='id use'>use</span> <span class='symbol'>:slugged</span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>Foo</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id extend'>extend</span> <span class='const'>FriendlyId</span>
    <span class='id friendly_id'>friendly_id</span> <span class='op'>&amp;</span><span class='gvar'>$friendly_id_config_proc</span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>Bar</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id extend'>extend</span> <span class='const'>FriendlyId</span>
    <span class='id friendly_id'>friendly_id</span> <span class='symbol'>:title</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='gvar'>$friendly_id_config_proc</span>
  <span class='kw'>end</span>
</pre>
<p>
However, it&#8217;s usually better to use <span class='object_link'><a href="../FriendlyId.html#defaults-class_method" title="FriendlyId.defaults (method)">FriendlyId.defaults</a></span> for this:
</p>
<pre class="code">
  <span class='const'>FriendlyId</span><span class='period'>.</span><span class='id defaults'>defaults</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id config'>config</span><span class='op'>|</span>
    <span class='id config'>config</span><span class='period'>.</span><span class='id base'>base</span> <span class='op'>=</span> <span class='symbol'>:name</span>
    <span class='id config'>config</span><span class='period'>.</span><span class='id use'>use</span> <span class='symbol'>:slugged</span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>Foo</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id extend'>extend</span> <span class='const'>FriendlyId</span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>Bar</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id extend'>extend</span> <span class='const'>FriendlyId</span>
    <span class='id friendly_id'>friendly_id</span> <span class='symbol'>:title</span>
  <span class='kw'>end</span>
</pre>
<p>
In general you should use the block syntax either because of your personal
aesthetic preference, or because you need to share some functionality
between multiple models that can&#8217;t be well encapsulated by
<span class='object_link'><a href="../FriendlyId.html#defaults-class_method" title="FriendlyId.defaults (method)">FriendlyId.defaults</a></span>.
</p>
<h3>Order Method Calls in a Block vs Ordering Options</h3>
<p>
When calling this method without a block, you may set the hash options in
any order.
</p>
<p>
However, when using block-style invocation, be sure to call
FriendlyId::Configuration&#8217;s <span class='object_link'><a href="Configuration.html#use-instance_method" title="FriendlyId::Configuration#use (method)">use</a></span>
method <b>prior</b> to the associated configuration options, because it
will include modules into your class, and these modules in turn may add
required configuration options to the <tt>@friendly_id_configuraton</tt>&#8217;s
class:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Person</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id friendly_id'>friendly_id</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id config'>config</span><span class='op'>|</span>
      <span class='comment'># This will work
</span>      <span class='id config'>config</span><span class='period'>.</span><span class='id use'>use</span> <span class='symbol'>:slugged</span>
      <span class='id config'>config</span><span class='period'>.</span><span class='id sequence_separator'>sequence_separator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>class</span> <span class='const'>Person</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id friendly_id'>friendly_id</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id config'>config</span><span class='op'>|</span>
      <span class='comment'># This will fail
</span>      <span class='id config'>config</span><span class='period'>.</span><span class='id sequence_separator'>sequence_separator</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:</span><span class='tstring_end'>&quot;</span></span>
      <span class='id config'>config</span><span class='period'>.</span><span class='id use'>use</span> <span class='symbol'>:slugged</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>
a customizable set of options
</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <h3>Options Hash (<tt>options</tt>):</h3>
    <ul class="option">
      
        <li>
          <span class="name">:use</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
The name of an addon to use. By default, FriendlyId provides
<span class='object_link'><a href="Slugged.html" title="FriendlyId::Slugged (module)">:slugged</a></span>, <span class='object_link'><a href="History.html" title="FriendlyId::History (module)">:history</a></span>,
<span class='object_link'><a href="Reserved.html" title="FriendlyId::Reserved (module)">:reserved</a></span>, and <span class='object_link'><a href="Scoped.html" title="FriendlyId::Scoped (module)">:scoped</a></span>.
</p>
</div>
        </tr>
      
        <li>
          <span class="name">:reserved_words</span>
          <span class="type">(<tt>Array</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
Available when using <tt>:reserved</tt>, which is loaded by default. Sets
an array of words banned for use as the basis of a friendly_id. By default
this includes &#8220;edit&#8221; and &#8220;new&#8221;.
</p>
</div>
        </tr>
      
        <li>
          <span class="name">:scope</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
Available when using <tt>:scoped</tt>. Sets the relation or column used to
scope generated friendly ids. This option has no default value.
</p>
</div>
        </tr>
      
        <li>
          <span class="name">:sequence_separator</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
Available when using <tt>:slugged</tt>. Configures the sequence of
characters used to separate a slug from a sequence. Defaults to
<tt>--</tt>.
</p>
</div>
        </tr>
      
        <li>
          <span class="name">:slug_column</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
Available when using <tt>:slugged</tt>. Configures the name of the column
where FriendlyId will store the slug. Defaults to <tt>:slug</tt>.
</p>
</div>
        </tr>
      
        <li>
          <span class="name">:slug_sequencer_class</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          &mdash; <div class='inline'><p>
Available when using <tt>:slugged</tt>. Sets the class used to generate
unique slugs. You should not specify this unless you&#8217;re doing some
extensive hacking on FriendlyId. Defaults to <span class='object_link'><a href="SlugSequencer.html" title="FriendlyId::SlugSequencer (class)">SlugSequencer</a></span>.
</p>
</div>
        </tr>
      
    </ul>
  
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>
Provides access to the model class&#8217;s friendly_id_config, which allows
an alternate configuration syntax, and conditional configuration logic.
</p>
</div>
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>
The model class&#8217;s <span class='object_link'><a href="Configuration.html" title="FriendlyId::Configuration (class)">friendly_id_config</a></span>.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/friendly_id/base.rb', line 113</span>

<span class='kw'>def</span> <span class='id friendly_id'>friendly_id</span><span class='lparen'>(</span><span class='id base'>base</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>yield</span> <span class='ivar'>@friendly_id_config</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='ivar'>@friendly_id_config</span><span class='period'>.</span><span class='id use'>use</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='symbol'>:use</span>
  <span class='ivar'>@friendly_id_config</span><span class='period'>.</span><span class='id send'>send</span> <span class='symbol'>:set</span><span class='comma'>,</span> <span class='id base'>base</span> <span class='op'>?</span> <span class='id options'>options</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:base</span> <span class='op'>=&gt;</span> <span class='id base'>base</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id options'>options</span>
  <span class='id before_save'>before_save</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id rec'>rec</span><span class='op'>|</span> <span class='id rec'>rec</span><span class='period'>.</span><span class='id instance_eval'>instance_eval</span> <span class='lbrace'>{</span><span class='ivar'>@current_friendly_id</span> <span class='op'>=</span> <span class='id friendly_id'>friendly_id</span><span class='rbrace'>}</span><span class='rbrace'>}</span>
  <span class='id include'>include</span> <span class='const'>Model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="friendly_id_config-instance_method">
  
    - (<tt>Object</tt>) <strong>friendly_id_config</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong> 
    <div class='inline'><p>
In the case of Single Table Inheritance (STI), this method will duplicate
the parent class&#8217;s FriendlyId::Configuration instance on first
access. If you&#8217;re concerned about thread safety, then be sure to
invoke <span class='object_link'><a href="#friendly_id-instance_method" title="FriendlyId::Base#friendly_id (method)">#friendly_id</a></span> in your class for each model.
</p>
</div>
  </div>

<p>
Returns the model class&#8217;s <span class='object_link'><a href="Configuration.html" title="FriendlyId::Configuration (class)">friendly_id_config</a></span>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/friendly_id/base.rb', line 126</span>

<span class='kw'>def</span> <span class='id friendly_id_config'>friendly_id_config</span>
  <span class='ivar'>@friendly_id_config</span> <span class='kw'>or</span> <span class='kw'>begin</span>
   <span class='ivar'>@friendly_id_config</span> <span class='op'>=</span> <span class='id base_class'>base_class</span><span class='period'>.</span><span class='id friendly_id_config'>friendly_id_config</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Aug 15 11:38:00 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>